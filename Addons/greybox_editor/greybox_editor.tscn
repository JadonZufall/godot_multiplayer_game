[gd_scene load_steps=10 format=3 uid="uid://dcsvtase42uv8"]

[ext_resource type="Script" uid="uid://cdfosevk65en0" path="res://Addons/greybox_editor/editor_window.gd" id="1_o8cy2"]
[ext_resource type="Texture2D" uid="uid://cmbxnw5v3h8sg" path="res://Addons/greybox_editor/icons/CreateNewSceneFrom.svg" id="2_aurca"]
[ext_resource type="Script" uid="uid://bqq4ndu4sg28" path="res://Addons/greybox_editor/editor_viewport.gd" id="3_1lxdh"]
[ext_resource type="World3D" uid="uid://bh3as61oru72a" path="res://Addons/greybox_editor/editor_world_3d.tres" id="3_5x8fy"]
[ext_resource type="Script" uid="uid://cxien6l7tp4kb" path="res://Addons/greybox_editor/screenshot.gd" id="3_i7gp4"]
[ext_resource type="Texture2D" uid="uid://l06enftpg4d0" path="res://Addons/greybox_editor/screenshot.png" id="4_awf1p"]
[ext_resource type="Material" uid="uid://cfkfwnqetd6ed" path="res://Addons/greybox_editor/grid_shader_material.tres" id="5_cmh26"]

[sub_resource type="BoxMesh" id="BoxMesh_5x8fy"]

[sub_resource type="PlaneMesh" id="PlaneMesh_i7gp4"]
material = ExtResource("5_cmh26")
size = Vector2(50, 50)

[node name="editor_window" type="Window"]
title = "Greybox Editor"
position = Vector2i(0, 36)
size = Vector2i(1280, 720)
min_size = Vector2i(1280, 720)
script = ExtResource("1_o8cy2")

[node name="VBoxContainer" type="VBoxContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="MenuBar" type="MenuBar" parent="VBoxContainer"]
layout_mode = 2

[node name="File" type="PopupMenu" parent="VBoxContainer/MenuBar"]
item_count = 1
item_0/text = "Export"
item_0/icon = ExtResource("2_aurca")
item_0/id = 0

[node name="HSplitContainer" type="HSplitContainer" parent="VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
drag_area_highlight_in_editor = true

[node name="Panel" type="Panel" parent="VBoxContainer/HSplitContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="VSplitContainer" type="VSplitContainer" parent="VBoxContainer/HSplitContainer/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
drag_area_highlight_in_editor = true

[node name="Panel" type="Panel" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="GridContainer" type="GridContainer" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="screenshot" type="Button" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel/GridContainer" node_paths=PackedStringArray("sub_viewport")]
layout_mode = 2
text = "screenshot"
script = ExtResource("3_i7gp4")
sub_viewport = NodePath("../../../../../viewport/sub_viewport")

[node name="CheckButton" type="CheckButton" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel/GridContainer"]
layout_mode = 2
text = "iso"

[node name="Panel2" type="Panel" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="GridContainer" type="GridContainer" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="TextureRect" type="TextureRect" parent="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel2/GridContainer"]
layout_mode = 2
texture = ExtResource("4_awf1p")

[node name="viewport" type="SubViewportContainer" parent="VBoxContainer/HSplitContainer"]
layout_mode = 2
size_flags_horizontal = 3
stretch = true
script = ExtResource("3_1lxdh")

[node name="sub_viewport" type="SubViewport" parent="VBoxContainer/HSplitContainer/viewport"]
own_world_3d = true
world_3d = ExtResource("3_5x8fy")
handle_input_locally = false
size = Vector2i(634, 685)
render_target_update_mode = 4

[node name="camera" type="Camera3D" parent="VBoxContainer/HSplitContainer/viewport/sub_viewport"]
transform = Transform3D(0.707107, -0.5, 0.5, 0, 0.707107, 0.707107, -0.707107, -0.5, 0.5, 2, 3, 2)
projection = 1
current = true
size = 5.0

[node name="light" type="DirectionalLight3D" parent="VBoxContainer/HSplitContainer/viewport/sub_viewport"]
transform = Transform3D(0.707107, -0.5, 0.5, 0, 0.707107, 0.707107, -0.707107, -0.5, 0.5, 0, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="VBoxContainer/HSplitContainer/viewport/sub_viewport"]
mesh = SubResource("BoxMesh_5x8fy")
skeleton = NodePath("../../../../..")

[node name="grid" type="MeshInstance3D" parent="VBoxContainer/HSplitContainer/viewport/sub_viewport"]
mesh = SubResource("PlaneMesh_i7gp4")

[node name="Label" type="Label" parent="VBoxContainer/HSplitContainer/viewport"]
layout_mode = 2
text = "test"

[connection signal="close_requested" from="." to="." method="_on_close_requested"]
[connection signal="focus_entered" from="." to="." method="_on_focus_entered"]
[connection signal="mouse_entered" from="." to="." method="_on_mouse_entered"]
[connection signal="window_input" from="." to="." method="_on_window_input"]
[connection signal="pressed" from="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel/GridContainer/screenshot" to="VBoxContainer/HSplitContainer/Panel/VSplitContainer/Panel/GridContainer/screenshot" method="_on_pressed"]
[connection signal="gui_input" from="VBoxContainer/HSplitContainer/viewport" to="VBoxContainer/HSplitContainer/viewport" method="_on_gui_input"]
